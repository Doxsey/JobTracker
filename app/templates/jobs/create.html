{% from "jobs_macros.html" import select_file_upload %} {% extends "base.html"
%} {% block title %}Create Job - Job Tracker{% endblock %} {% block content %}
<div class="row justify-content-center">
  <div class="col-md-8">
    <h3>Add New Job</h3>
    <br />

    <form action="" method="post" enctype="multipart/form-data">
      {{ form.hidden_tag() }}
      <div class="container text-center">
        <div class="row">
          <div class="col">
            {{ form.company(size=32, class="form-control",
            placeholder="Company") }}
            <br />
          </div>
          <div class="col">
            <!-- prettier-ignore -->
            {{ form.title(size=32, class="form-control", placeholder="Job Title") }}
          </div>
        </div>

        <div class="row">
          <div class="col">
            {{ form.location(size=32, class="form-control",
            placeholder="Location") }}
          </div>
          <div class="col">
            <div class="row">
              <select
                class="form-select"
                name="remote_option"
                id="remote_option"
                aria-label="Default select example"
              >
                <option value="">Select Remote Option</option>
                <option value="Remote">Remote</option>
                <option value="Hybrid">Hybrid</option>
                <option value="Onsite">Onsite</option>
                <option value="Unknown">Unknown</option>
              </select>
            </div>
          </div>
        </div>

        <div class="row mt-3">
          <div class="col">
            <div class="mb-3">
              <!-- prettier-ignore -->
              {{ form.description(rows=3, class="form-control", placeholder="Job Description") }}
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col">
            {{ form.salary_range_low(size=32, class="form-control",
            placeholder="Salary Range Low") }}
            <br />
          </div>
          <div class="col">
            {{ form.salary_range_high(size=32, class="form-control",
            placeholder="Salary Range High") }}
          </div>
        </div>

        <div class="row">
          <div class="col">
            {{ form.company_website(size=32, class="form-control",
            placeholder="Company Website") }}
          </div>
          <div class="col">
            {{ form.posting_id(size=32, class="form-control",
            placeholder="Posting ID") }}
          </div>
        </div>

        <br />
        {{ select_file_upload(form.resume_file, "Resume") }} {{
        select_file_upload(form.cover_letter_file, "Cover Letter") }} {{
        select_file_upload(form.job_description_file, "Job Description") }}

        <br />
        <hr />
        <br />

        <div class="row">
          <div class="col">
            <h5 class="text-start">Referrer Information</h5>
            <br />
          </div>
        </div>

        <div class="row">
          <div class="col">
            {{ form.referrer(size=32, class="form-control",
            placeholder="Referrer") }}
            <br />
          </div>
          <div class="col">
            {{ form.referrer_posting_id(size=32, class="form-control",
            placeholder="Referrer Posting ID") }}
          </div>
        </div>

        <div class="row">
          <div class="col">
            {{ form.posting_url(size=32, class="form-control",
            placeholder="Posting URL") }}
            <br />
          </div>
        </div>

        <div class="mb-3">{{ form.submit(class="btn btn-success") }}</div>
      </div>
    </form>

    {% for field, errors in form.errors.items() %} {% for error in errors %}
    <div class="row">
      <div class="alert alert-danger">{{ field }}: {{ error }}</div>
    </div>
    {% endfor %} {% endfor %}
  </div>
</div>

<script>
  document
    .querySelector('input[type="file"]')
    .addEventListener("change", function (e) {
      const fileName = e.target.files[0]?.name;
      if (fileName) {
        console.log("Selected file:", fileName);
        // You can add more file preview functionality here
      }
    });
</script>
{% endblock %}
